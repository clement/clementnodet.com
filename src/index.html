<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Clément Nodet</title>
        <link href='http://fonts.googleapis.com/css?family=Lato:300,400,300italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="css/style.css" />
 	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-9239235-2']);
	  _gaq.push(['_setDomainName', '.clementnodet.com']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
    </head>

    <body>
        <div class="left">
            <a href="http://twitter.com/clementnodet"><img src="img/tweet.png"></a>
            <p class="tweet">
                I love philly cheese steak.
            </p>
        </div>
        <div class="right">
            <div class="header">
                <img src="img/clement.png" alt="portrait">
                <h1>Clément Nodet</h1>
            </div>

            <div class="bio">
                <p>
                    You can find me on <a href="http://github.com/clement/">github</a>, on <a href="http://flickr.com/photos/clemvietnam/">flickr</a>, on <a href="http://facebook.com/clement.nodet/">facebook</a> and probably a whole lot more should you feel the need to google my name.
                </p>

                <p>
                    If you need to get in touch, drop me a line by <a href="mailto:clement.nodet@gmail.com">email</a>, or add me on <a href="skype:clement_nodet">skype</a>.
                </p>

                <p>
                    These days, I live in Mountain View, California, where I work for Google, as a software engineer. If you’re interested in what I’ve done before, check out my <a href="files/resume.pdf">resume</a>.
                </p>
            </div>
        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="/js/stash.min.js"></script>
        <script>
            $(function () {
                function rich(tweet) {
                    var reLinks = /[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+/g
                      , makeLink = function (url) { return url.link(url) }
                      , reHandle = /@[A-Za-z0-9-_]+/g
                      , makeHandle = function (h) { return h.link('http://twitter.com/'+h.substr(1)) }

                    return tweet.replace(reLinks, makeLink).replace(reHandle, makeHandle)
                }

                function display(tweets) {
                    if (tweets.length) {
                        var $tweet = $('.tweet')
                          , tweet = tweets.shift()
                        // Cycle
                        tweets.push(tweet)

                        $tweet.fadeOut(function () {
                            $tweet.html(rich(tweet)).fadeIn(function () {
                                setTimeout(function () { display(tweets) }, 8000)
                            })
                        })
                    }
                }
               
                var lmd = stash.get('lmd')

                if (lmd && ((+ new Date) - lmd) < 86400000) { // 1 day
                    display(stash.get('tweets'))
                }
                else {
                    $.getJSON('http://api.twitter.com/1/statuses/user_timeline.json?callback=?', {screen_name: 'clementnodet', trim_user: true, count: 10}, function (data) {
                        var tweets = $.map(data, function (t) { return t.text })
                        stash.set('lmd', +new Date)
                        stash.set('tweets', tweets)
                        display(tweets)
                    })
                }
            })
        </script>
    </body>
</html>
